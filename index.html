<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üè´ –®–∫–æ–ª—å–Ω—ã–π —Å–∞–π—Ç ‚Äî –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 5‚Äì11</title>
<style>
:root{
  --bg:#f3f4f6;
  --card:#fff;
  --text:#111;
  --accent:#2563eb;
}
body.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#f8fafc;
  --accent:#38bdf8;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:.25s;
}
header{
  background:var(--card);
  padding:12px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  position:sticky;
  top:0;
  z-index:20;
}
.header-left{display:flex;align-items:center;gap:12px}
.logo{font-weight:700}
nav{display:flex;gap:8px;align-items:center}
nav button{
  border:0;padding:8px 12px;border-radius:8px;background:var(--accent);color:#fff;cursor:pointer;
}
nav button:hover{opacity:.9}
.container{max-width:1100px;margin:18px auto;padding:0 16px}
.card{background:var(--card);border-radius:14px;padding:18px;margin-bottom:18px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}
.hidden{display:none}
.controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px}
select,input{padding:8px;border-radius:8px;border:1px solid #cfcfcf;background:transparent}
table{width:100%;border-collapse:collapse;margin-top:8px}
th,td{padding:10px;border-bottom:1px solid rgba(0,0,0,0.06);text-align:center}
th{background:rgba(0,0,0,0.03)}
input.lesson{width:100%;padding:6px;border-radius:8px;border:1px solid #ddd;text-align:center}
.row-actions{display:flex;gap:8px;justify-content:center}
.small{font-size:13px;padding:6px 8px}
.footer-note{font-size:13px;color:rgba(0,0,0,0.6);margin-top:8px}
@media (max-width:640px){
  th,td{font-size:14px;padding:8px}
  nav{gap:6px}
}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <div class="logo">üè´ –®–∫–æ–ª—å–Ω—ã–π —Å–∞–π—Ç</div>
    <div style="font-size:13px;color:gray">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 5‚Äì11</div>
  </div>

  <nav>
    <button onclick="showPage('home')">–ì–ª–∞–≤–Ω–∞—è</button>
    <button onclick="showPage('schedule')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
    <button onclick="showPage('bells')">–ó–≤–æ–Ω–∫–∏</button>
    <button id="themeBtn" onclick="toggleTheme()">üåû</button>
  </nav>
</header>

<div class="container">

  <!-- HOME -->
  <div id="home" class="card">
    <h1>–¥–∞–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±–ª–∞—á–Ω—ã–º —Å–∞–π—Ç–æ–º</h1>
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2>
    <p>–≠—Ç–æ –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —à–∫–æ–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ <strong>¬´–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ¬ª</strong> –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–ª–∞—Å—Å –∏ –¥–µ–Ω—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫–∏ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</p>
    <p class="footer-note">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å—Ä–∞–∑—É –Ω–∞ —Å–∞–π—Ç–µ </p>
  </div>

  <!-- SCHEDULE -->
  <div id="schedule" class="card hidden">
    <h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤ (5‚Äì11 –∫–ª–∞—Å—Å—ã)</h2>

    <div class="controls">
      <select id="classSelect" onchange="onClassOrDayChange()"></select>
      <select id="daySelect" onchange="onClassOrDayChange()">
        <option value="mon">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
        <option value="tue">–í—Ç–æ—Ä–Ω–∏–∫</option>
        <option value="wed">–°—Ä–µ–¥–∞</option>
        <option value="thu">–ß–µ—Ç–≤–µ—Ä–≥</option>
        <option value="fri">–ü—è—Ç–Ω–∏—Ü–∞</option>
      </select>

      <button class="small" onclick="resetToDefault()">–°–±—Ä–æ—Å–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
      <button class="small" onclick="exportSchedule()">–≠–∫—Å–ø–æ—Ä—Ç </button>
      <button class="small" onclick="importPrompt()">–ò–º–ø–æ—Ä—Ç </button>
    </div>

    <table>
      <thead>
        <tr>
          <th>‚Ññ</th>
          <th>–í—Ä–µ–º—è</th>
          <th>–ü—Ä–µ–¥–º–µ—Ç (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è)</th>
          <th>–ü–µ—Ä–µ–º–µ–Ω–∞</th>
        </tr>
      </thead>
      <tbody id="scheduleBody"></tbody>
    </table>
  </div>

  <!-- BELLS -->
  <div id="bells" class="card hidden">
    <h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤</h2>
    <ul>
      <li>1 —É—Ä–æ–∫ ‚Äî 09:00‚Äì09:45 (–ø–µ—Ä–µ–º–µ–Ω–∞ 5 –º–∏–Ω)</li>
      <li>2 —É—Ä–æ–∫ ‚Äî 09:50‚Äì10:35 (–ø–µ—Ä–µ–º–µ–Ω–∞ 15 –º–∏–Ω)</li>
      <li>3 —É—Ä–æ–∫ ‚Äî 10:50‚Äì11:35 (–ø–µ—Ä–µ–º–µ–Ω–∞ 5 –º–∏–Ω)</li>
      <li>4 —É—Ä–æ–∫ ‚Äî 11:40‚Äì12:25 (–ø–µ—Ä–µ–º–µ–Ω–∞ 15 –º–∏–Ω)</li>
      <li>5 —É—Ä–æ–∫ ‚Äî 12:40‚Äì13:25 (–ø–µ—Ä–µ–º–µ–Ω–∞ 5 –º–∏–Ω)</li>
      <li>6 —É—Ä–æ–∫ ‚Äî 13:30‚Äì14:15 (–ø–µ—Ä–µ–º–µ–Ω–∞ 5 –º–∏–Ω)</li>
      <li>7 —É—Ä–æ–∫ ‚Äî 14:20‚Äì15:05 (–ø–µ—Ä–µ–º–µ–Ω–∞ 5 –º–∏–Ω)</li>
    </ul>
  </div>

</div>

<script>
/* ---------- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ —É—Ä–æ–∫–æ–≤ ---------- */
const lessonTimes = [
  {time:"09:00‚Äì09:45", break:"5 –º–∏–Ω"},
  {time:"09:50‚Äì10:35", break:"15 –º–∏–Ω"},
  {time:"10:50‚Äì11:35", break:"5 –º–∏–Ω"},
  {time:"11:40‚Äì12:25", break:"15 –º–∏–Ω"},
  {time:"12:40‚Äì13:25", break:"5 –º–∏–Ω"},
  {time:"13:30‚Äì14:15", break:"5 –º–∏–Ω"},
  {time:"14:20‚Äì15:05", break:"5 –º–∏–Ω"}
];

const classes = [
  "5”ò","5–ê","5–ë",
  "6”ò","6–ê","6–ë",
  "7”ò","7–ê","7–ë",
  "8–ê","8–ë",
  "9–ê","9–ë",
  "10–ê","11–ê"
];
const days = ["mon","tue","wed","thu","fri"];

/* ---------- –ü–æ—Å—Ç—Ä–æ–∏–º defaultSchedule —á–µ—Ä–µ–∑ addDefault (–∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ —Ç—ã –ø—Ä–∏—Å–ª–∞–ª –¥–ª—è 5 –∏ 6 –∫–ª–∞—Å—Å–æ–≤) ---------- */
const defaultSchedule = {};

function addDefault(cls, day, lessons){
  if(!defaultSchedule[cls]) defaultSchedule[cls] = {mon:[],tue:[],wed:[],thu:[],fri:[]};
  defaultSchedule[cls][day] = lessons.slice(); // clone
}

/* ========= 5”ò ========= */
addDefault("5”ò","mon",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5”ò","tue",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5”ò","wed",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5”ò","thu",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5”ò","fri",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);

/* ========= 5–ê ========= */
addDefault("5–ê","mon",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ê","tue",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ê","wed",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ê","thu",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ê","fri",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);

/* ========= 5–ë ========= */
addDefault("5–ë","mon",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ë","tue",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ë","wed",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ë","thu",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("5–ë","fri",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);

/* ========= 6”ò ========= */
addDefault("6”ò","mon",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6”ò","tue",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6”ò","wed",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6”ò","thu",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6”ò","fri",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);

/* ========= 6–ê ========= */
addDefault("6–ê","mon",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ê","tue",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ê","wed",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ê","thu",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ê","fri",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);

/* ========= 6–ë ========= */
addDefault("6–ë","mon",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ë","tue",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ë","wed",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ë","thu",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
addDefault("6–ë","fri",["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
/* ========= 7‚Äì11 (—à–∞–±–ª–æ–Ω: –£—Ä–æ–∫1..–£—Ä–æ–∫7 –¥–ª—è –≤—Å–µ—Ö –¥–Ω–µ–π) ========= */
["7”ò","7–ê","7–ë","8–ê","8–ë","9–ê","9–ë","10–ê","11–ê"].forEach(c=>{
  days.forEach(d=>{
    addDefault(c,d,["–£—Ä–æ–∫1","–£—Ä–æ–∫2","–£—Ä–æ–∫3","–£—Ä–æ–∫4","–£—Ä–æ–∫5","–£—Ä–æ–∫6","–£—Ä–æ–∫7"]);
  });
});

/* ---------- scheduleData: –ª–∏–±–æ –∏–∑ localStorage, –ª–∏–±–æ defaultSchedule ---------- */
let scheduleData = null;
const STORAGE_KEY = "school_schedule_v1";

function loadSchedule(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw){
      const parsed = JSON.parse(raw);
      // –ø—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî –µ—Å—Ç—å –ª–∏ –∫–ª—é—á–∏ –∫–ª–∞—Å—Å–æ–≤
      let ok = true;
      for(const c of classes){
        if(!parsed[c]) { ok = false; break; }
        for(const d of days){
          if(!Array.isArray(parsed[c][d]) || parsed[c][d].length !== 7){ ok=false; break; }
        }
        if(!ok) break;
      }
      if(ok){
        scheduleData = parsed;
        return;
      }
    }
  }catch(e){
    console.error("load error", e);
  }
  // –µ—Å–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏ ‚Äî –∫–æ–ø–∏—Ä—É–µ–º defaultSchedule
  scheduleData = {};
  for(const c of Object.keys(defaultSchedule)){
    scheduleData[c] = {};
    for(const d of days){
      scheduleData[c][d] = defaultSchedule[c][d].slice();
    }
  }
  saveSchedule();
}

function saveSchedule(){
  try{
    localStorage.setItem(STORAGE_KEY, JSON.stringify(scheduleData));
  }catch(e){
    console.error("save error", e);
  }
}

/* ---------- UI: –∫–ª–∞—Å—Å –∏ –¥–µ–Ω—å ---------- */
const classSelect = document.getElementById("classSelect");
const daySelect = document.getElementById("daySelect");
const scheduleBody = document.getElementById("scheduleBody");

function populateClassSelect(){
  classSelect.innerHTML = "";
  classes.forEach(c=>{
    const opt = document.createElement("option");
    opt.value = c;
    opt.textContent = c;
    classSelect.appendChild(opt);
  });
}

function renderSchedule(){
  const cls = classSelect.value;
  const day = daySelect.value;
  scheduleBody.innerHTML = "";
  const lessons = scheduleData[cls][day];
  lessons.forEach((lesson,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${lessonTimes[i].time}</td>
      <td><input class="lesson" value="${escapeHtml(lesson)}" oninput="onLessonInput('${cls}','${day}',${i},this.value)"></td>
      <td>${lessonTimes[i].break}</td>
    `;
    scheduleBody.appendChild(tr);
  });
}

/* ---------- handlers ---------- */
function onLessonInput(cls, day, index, value){
  scheduleData[cls][day][index] = value;
  saveSchedule();
}

function onClassOrDayChange(){
  renderSchedule();
}

/* ---------- theme ---------- */
const THEME_KEY = "school_theme_v1";
const themeBtn = document.getElementById("themeBtn");
function applyStoredTheme(){
  const t = localStorage.getItem(THEME_KEY) || "light";
  if(t === "dark") document.body.classList.add("dark"), themeBtn.textContent="üåô";
  else document.body.classList.remove("dark"), themeBtn.textContent="üåû";
}
function toggleTheme(){
  document.body.classList.toggle("dark");
  const isDark = document.body.classList.contains("dark");
  localStorage.setItem(THEME_KEY, isDark ? "dark" : "light");
  themeBtn.textContent = isDark ? "üåô" : "üåû";
}

/* ---------- reset, export, import ---------- */
function resetToDefault(){
  if(!confirm("–°–±—Ä–æ—Å–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é? –í—Å–µ –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.")) return;
  // overwrite scheduleData with defaultSchedule
  for(const c of Object.keys(defaultSchedule)){
    for(const d of days){
      scheduleData[c][d] = defaultSchedule[c][d].slice();
    }
  }
  saveSchedule();
  renderSchedule();
  alert("–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–±—Ä–æ—à–µ–Ω–æ.");
}

function exportSchedule(){
  const dataStr = JSON.stringify(scheduleData, null, 2);
  // –ø—Ä–µ–¥–ª–æ–∂–∏–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
  try{
    navigator.clipboard.writeText(dataStr).then(()=>{
      alert("JSON —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.");
    },()=>{
      // fallback: –ø–æ–∫–∞–∑–∞—Ç—å –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
      const w = window.open("", "_blank");
      w.document.body.textContent = dataStr;
    });
  }catch(e){
    const w = window.open("", "_blank");
    w.document.body.textContent = dataStr;
  }
}

function importPrompt(){
  const txt = prompt("–í—Å—Ç–∞–≤—å—Ç–µ JSON —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Ç–µ–∫—É—â–µ–µ):");
  if(!txt) return;
  try{
    const obj = JSON.parse(txt);
    // –±—ã—Å—Ç—Ä–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
    for(const c of classes){
      if(!obj[c]) throw new Error("–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–ª–∞—Å—Å: "+c);
      for(const d of days){
        if(!Array.isArray(obj[c][d]) || obj[c][d].length !== 7) throw new Error("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è " + c + " " + d);
      }
    }
    scheduleData = obj;
    saveSchedule();
    renderSchedule();
    alert("–ò–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–µ–Ω.");
  }catch(e){
    alert("–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: " + e.message);
  }
}

/* ---------- misc ---------- */
function showPage(id){
  document.querySelectorAll('.card').forEach(el=>el.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  // –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  if(id === 'schedule') renderSchedule();
}

function escapeHtml(str){
  if(str == null) return "";
  return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");
}

/* ---------- —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ---------- */
(function init(){
  populateClassSelect();
  loadSchedule();
  applyStoredTheme();

  // –≤—ã–±–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∫–ª–∞—Å—Å/–¥–µ–Ω—å –∏–∑ localStorage –µ—Å–ª–∏ –µ—Å—Ç—å
  const lastClass = localStorage.getItem("school_last_class");
  const lastDay = localStorage.getItem("school_last_day");
  if(lastClass && classes.includes(lastClass)) classSelect.value = lastClass;
  if(lastDay && ["mon","tue","wed","thu","fri"].includes(lastDay)) daySelect.value = lastDay;

  // –æ–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ storage –ø—Ä–∏ —Å–º–µ–Ω–µ
  classSelect.addEventListener('change', ()=> {
    localStorage.setItem("school_last_class", classSelect.value);
  });
  daySelect.addEventListener('change', ()=> {
    localStorage.setItem("school_last_day", daySelect.value);
  });

  renderSchedule();
  showPage('home');
})();
</script>

</body>
</html>